if (self.CavalryLogger) { CavalryLogger.start_js(["GDnBv"]); }

__d("MInitJewelCounts",["Arbiter"],(function(a,b,c,d,e,f,g){"use strict";function a(a){g.inform("m:jewels:init-counts",a,"persistent")}e.exports={main:a}}),null);
__d("MTabbable",["MAria","MJSEnvironment","MViewport","isNodeWithinRect"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();function k(a,b){while(a&&a!==b){if(g.isHidden(a))return!0;a=a.parentNode}return!1}function l(a,b){if(a.offsetHeight===0||a.offsetWidth===0||window.getComputedStyle(a).visibility==="hidden"||parseInt(a.tabIndex,10)<0||k(a,b))return!1;if(a.tabIndex>=0)return!0;switch(a.tagName){case"A":return a.href&&a.rel!="ignore";case"INPUT":return a.type!="hidden"&&a.type!="file"&&!a.disabled;case"BUTTON":case"SELECT":case"TEXTAREA":return!a.disabled}return!1}function a(a){__p&&__p();if(!a.getBoundingClientRect)return;var b=h.IS_APPLE_WEBKIT_IOS&&parseFloat(h.OS_VERSION)>=8||h.BROWSER_NAME==="Safari"&&!h.IS_APPLE_WEBKIT_IOS;b=b?a.querySelectorAll("a, button, select, [tabindex]"):a.querySelectorAll("a, button, input, select, textarea, [tabindex]");var c=i.getBoundingRect();for(var d=0,e;e=b[d];d++)if(l(e,a)&&j(e,c)){e.focus();return}}f.focusTabbable=a}),null);
__d("Popover",["CSS","DOM","MAria","MViewport","Stratcom","Vector","$","eventsMixinDeprecated","nullthrows","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q=40;function r(a){"use strict";__p&&__p();var b=a.flyout;b=typeof b==="string"?m(b):b;this.flyout=b;this.content=h.scry(this.flyout,"div","flyout-content")[0];this.options=a;this._onOrientationChange=this._reposition.bind(this);g.conditionClass(this.flyout,"popover_flyout",!0);b=a.button;b&&(b=typeof b==="string"?m(b):b,this.buttonClickListener=h.listen(b,"click",null,this._openHandler.bind(this)),b.setAttribute("role","button"),i.setupPopup(b,this.flyout),this.button=b);b=a.flyoutAnchor;b?this.flyoutAnchor=typeof b==="string"?m(b):b:this.flyoutAnchor=this.button;this.options.flyoutFromRoot&&(this.flyoutClickListener=h.listen(this.flyout,"click",null,this._openHandler.bind(this)));this.options.touchstart_callback&&(this.flyoutTouchStartListener=h.listen(this.flyout,"touchstart",null,this._touchStartHandler.bind(this)));this.options.touchmove_callback&&(this.flyoutTouchMoveListener=h.listen(this.flyout,"touchmove",null,this._touchMoveHandler.bind(this)));this.options.touchend_callback&&(this.flyoutTouchEndListener=h.listen(this.flyout,"touchend",null,this._touchEndHandler.bind(this)));r._instances[this.flyout.id]=this}r.prototype.isOpen=function(){"use strict";return!!this._isOpen};r.prototype.open=function(){"use strict";__p&&__p();if(this.isOpen())return;r._activePopover&&r._activePopover.close();r._activePopover=this;this._isOpen=!0;this.constraint=null;g.conditionClass(this.flyout,"popover_hidden",!1);this.options.flyoutFromRoot&&this._absolutePositionFlyout();this._position();this.options.heightConstraint||(g.conditionClass(o(document.body),"disableClicks",!0),this.globalListener=k.listenCapture("click",null,this._closeHandler.bind(this)));window.addEventListener("orientationchange",this._onOrientationChange,!1);i.showPopup(this.button,this.flyout);if(this.options.ensureVisible){var a=j.getScrollTop(),b=this._getElementPosition(this.flyout).y,c=b+this.flyout.offsetHeight;c=c-(a+j.getUseableHeight());if(c>0){c=Math.min(c,Math.max(b-a-q,0));j.scrollTo(0,a+c)}}this.invoke("open")};r.prototype.close=function(a){"use strict";__p&&__p();if(!this.isOpen())return;r._activePopover=null;this._isOpen=!1;g.conditionClass(this.flyout,"popover_hidden",!0);this.options.flyoutFromRoot&&this.flyoutParent&&(this.flyoutParent.appendChild(this.flyout),delete this.flyoutParent);p(function(){g.conditionClass(o(document.body),"disableClicks",!1)}.bind(this),400);this.globalListener&&this.globalListener.remove();window.removeEventListener("orientationchange",this._onOrientationChange,!1);this._releaseConstraint();i.hidePopup(this.button,this.flyout);a||this.invoke("close")};r.prototype.clear=function(){"use strict";this.globalListener&&this.globalListener.remove(),this.buttonClickListener&&this.buttonClickListener.remove(),this.flyoutClickListener&&this.flyoutClickListener.remove(),this.flyoutTouchStartListener&&this.flyoutTouchStartListener.remove(),this.flyoutTouchMoveListener&&this.flyoutTouchMoveListener.remove(),this.flyoutTouchEndListener&&this.flyoutTouchEndListener.remove(),delete r._instances[this.flyout.id]};r.prototype.refreshConstraints=function(){"use strict";if(!this._isOpen)return!1;var a=this.flyout;this._releaseConstraint();this.options.heightConstraint?(a.style.minHeight=j.getUseableHeight()+"px",this.constraint=j.addHeightConstraint(l.getDim(this.content).y+this._getElementPosition(a).y)):this.constraint=j.addMinHeightConstraint(l.getDim(a).y+this._getElementPosition(a).y+r._MARGIN)};r.prototype._getTouchPoint=function(event){"use strict";var a,b=event.getRawEvent();b instanceof TouchEvent&&(a=b.targetTouches[0]);b={x:a?a.screenX:0,y:a?a.screenY:0};return b};r.prototype._touchStartHandler=function(event){"use strict";var a=this.options.touchstart_callback;a&&a(this._getTouchPoint(event))};r.prototype._touchMoveHandler=function(event){"use strict";if(this.isOpen()){var a=this.options.touchmove_callback;a&&a(this._getTouchPoint(event))}};r.prototype._touchEndHandler=function(event){"use strict";var a=this.options.touchend_callback;a&&a(this._getTouchPoint(event))};r.prototype._openHandler=function(event){"use strict";__p&&__p();event.prevent();var a=this.isOpen();if(a&&!this.options.preventClose)this.close();else if(!a){a=h.scry(document,"input");for(var b=0;b<a.length;b++)a[b].blur();this.open()}};r.prototype._closeHandler=function(event){"use strict";event.getNode("popover")||this.close()};r.prototype._getElementPosition=function(a){"use strict";__p&&__p();a=a;var b=a.offsetLeft,c=a.offsetTop;a=a.offsetParent;while(a&&a!==document.documentElement){b+=a.offsetLeft;c+=a.offsetTop;var d=window.getComputedStyle(a);b+=parseInt(d.getPropertyValue("border-left-width").slice(0,-2),10);c+=parseInt(d.getPropertyValue("border-top-width").slice(0,-2),10);a=a.offsetParent}return new l(b,c)};r.prototype._absolutePositionFlyout=function(){"use strict";this.flyoutParent=this.flyout.parentNode;m("root").appendChild(this.flyout);var a=this._getElementPosition(this.flyout.parentNode),b=this._getElementPosition(this.flyoutAnchor),c=l.getDim(this.flyoutAnchor);b=b.y-a.y+c.y;this.flyout.style.position="absolute";this.flyout.style.top=b+"px"};r.prototype._position=function(){"use strict";var a=this.flyout;if(this.flyoutAnchor&&this.options.positionNub){var b=this._getElementPosition(this.flyoutAnchor),c=h.find(this.flyout,"*","nub"),d=l.getDim(c).x,e=l.getDim(this.flyoutAnchor).x;a=this._getElementPosition(a);new l(b.x-a.x+(e-d)/2,0).setPos(c)}this.refreshConstraints()};r.prototype._reposition=function(){"use strict";p(this._position.bind(this),0)};r.prototype._releaseConstraint=function(){"use strict";this.constraint&&(this.constraint.release(),this.constraint=null)};r.getInstance=function(a){"use strict";return r._instances[a]};r.clearAll=function(){"use strict";for(var a=0;a<r._instances.length;a++)r._instances[a].clear()};r._activePopover=null;r._MARGIN=40;r._instances={};n(r,["open","close"]);e.exports=r}),null);
__d("MJewelFlyout",["CSS","DOM","EventEmitter","MHistory","MJSEnvironment","MLogState","MTabbable","MViewport","Popover","Stratcom","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r="acw",s="aclb",t=3e3;function u(a,b,c){this.$1=b,this.$2=a,this.$3=c,this.$7=new i()}u.prototype.isOpen=function(){return!!this.$9&&this.$9.isOpen()};u.prototype.open=function(){this.$9&&this.$9.open()};u.prototype.close=function(){this.$9&&this.$9.close()};u.prototype.$10=function(){var a=new o({button:h.find(this.$2,"*","icon"),flyout:this.$1,ensureVisible:!1,heightConstraint:!0,preventClose:!0});this.$9=a;this.$4=a.listen("open",this.$11.bind(this));this.$5=a.listen("close",this.$12.bind(this));this.$6=h.listen(this.$1,"click",null,this.$13.bind(this));k.IS_ANDROID&&k.GET_OS_VERSION>=4&&(this.$8=h.scry(this.$1,"div","scroll-area")[0])};u.prototype.clear=function(){this.$4&&this.$4.remove(),this.$5&&this.$5.remove(),this.$6&&this.$6.remove(),this.$9&&this.$9.clear()};u.prototype.reregisterListeners=function(){var a=this.isOpen();this.clear();this.$10();a&&this.open()};u.prototype.addOpenListener=function(a){return this.$7.addListener("open",a)};u.prototype.$11=function(){if(this.$8){n.scrollToHeader();var a=document.documentElement;a&&(g.conditionClass(a,"hide-scroll",!0),this.$8.style.maxHeight=a.offsetHeight-200+"px")}j.pushSoftState(this.$3.softState);this.$7.emit("open");p.invoke("m:jewel:flyout:open",this.$3.sigil,{jewel:this.$3.sigil});m.focusTabbable(this.$1)};u.prototype.$12=function(){if(this.$8){this.$8.style.minHeight="";var a=document.documentElement;a&&g.conditionClass(a,"hide-scroll",!1)}p.invoke("m:jewel:flyout:close",this.$3.sigil,{jewel:this.$3.sigil});j.popSoftState(this.$3.softState)};u.prototype.$13=function(event){l.updateLink(event,this.$3.pos)};u.prototype.$14=function(event){event.kill()};u.prototype.setHeaderText=function(a,b){if(!a||!b)return;a=h.scry(this.$1,"*",a)[0];if(!a)return;var c=a.cloneNode(!0);c.innerText=b;h.replace(a,c)};u.removeMenuContent=function(a){a=document.getElementById(a);a&&h.remove(a)};u.updateMenuColor=function(a,b,c){c?q(u.$15.bind(this,a,b),t):u.$15(a,b)};u.$15=function(a,b){a=document.getElementById(a);a&&(g.conditionClass(a,s,!b),g.conditionClass(a,r,b))};u.create=function(a,b,c){a=new u(a,b,c);a.$10();return a};e.exports=u}),null);
__d("MJewel",["CSS","DOM","MJewelFlyout","Stratcom","URI","$","eventsMixinDeprecated","intlNumUtils"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o=0;p.create=function(a,b){"use strict";a=new p(a,b);a._init();return a};function p(a,b){"use strict";this._count=0,this._sigil=a,this.options=b||{},this._jewelNode=l(p.JEWEL_NAV_NODE_ID),this._softState=b.softState||"jewel="+o++,this._contentsSigil=b.contentsSigil||"contents",this._additionalPaths=b.additionalPaths||[],this._noPopover=!!b.noPopover,this._preventClearBadge=!!b.preventClearBadge}p.prototype._init=function(){"use strict";if(!this._noPopover){var a=i.create(this._getJewelElement(),this._getFlyoutElement(),{sigil:this._sigil,softState:this._softState,pos:this.options.pos});a.addOpenListener(this.handleViewedContent.bind(this));this._flyout=a}j.listen("m:history:change",null,this._updateJewelsOnHistoryChange.bind(this))};p.prototype._updateJewelsOnHistoryChange=function(event){"use strict";event.getData().soft===this._softState?this._flyout&&this._flyout.open():this._flyout&&this._flyout.close(),this._updateIsJewelActive(event)};p.prototype.isInitialized=function(){"use strict";return!!h.scry(this._jewelNode,"*",this._contentsSigil)[0]};p.prototype._getJewelElement=function(){"use strict";return h.find(this._jewelNode,"div",this._sigil)};p.prototype._getCountElement=function(){"use strict";return h.find(this._getJewelElement(),"span","count")};p.prototype._getContentsElement=function(){"use strict";return h.find(this._getJewelElement(),"*",this._contentsSigil)};p.prototype._getFlyoutElement=function(){"use strict";return h.find(this._getJewelElement(),"*","flyout")};p.prototype.getCount=function(){"use strict";return this._count};p.prototype.getFlyout=function(){"use strict";return this._flyout};p.prototype._updateCountElement=function(){"use strict";var a=this._getJewelCount();h.setContent(this._getCountElement(),n.formatNumberWithThousandDelimiters(a));a=this._getJewelElement();var b=this._count>0;g.conditionClass(a,"noCount",!b);g.conditionClass(a,"hasCount",b)};p.prototype._updateIsJewelActive=function(event){"use strict";var a=new k(event.getData().path);a=a.getPath();var b=event.getData().soft;a=!b&&this._additionalPaths.includes(a);b=b===this._softState;g.conditionClass(this._getJewelElement(),"popoverOpen",b||a)};p.prototype.setCount=function(a){"use strict";if(a<0)return;this._count=a;this._updateCountElement()};p.prototype.updateCount=function(a,b){"use strict";!this.isOpen()?this.setCount(a):a&&b()};p.prototype.handleViewedContent=function(){"use strict";this.getCount()>0&&this.isInitialized()?(this._preventClearBadge||this.setCount(0),this.invoke("cleared")):this.invoke("jewel_click")};p.prototype._getJewelCount=function(){"use strict";if(this._count>0)return this._count;else return 0};p.prototype.isOpen=function(){"use strict";return!!this._flyout&&this._flyout.isOpen()};p.prototype.reregisterListeners=function(){"use strict";var a=this._flyout;a&&a.reregisterListeners()};p.JEWEL_NAV_NODE_ID="mJewelNav";m(p,["cleared","jewel_click"]);e.exports=p}),null);
__d("MBookmarksJewel",["Event","MJewel","MJewels","QE2Logger"],(function(a,b,c,d,e,f,g,h,i,j){var k=!1;a={initJewel:function(a){if(k)return;k=!0;h.create("bookmarks",{softState:i.BOOKMARKS,noPopover:!!a.noFlyout,additionalPaths:["/bookmarks/"]})},exposeUserOnClick:function(a){g.listen(a,"click",function(){j.logExposureForDatr("mtouch_bookmarks_logged_out_experiments")})}};e.exports=a}),null);
__d("FriendingSurfaceVisitationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){h.log("logger:FriendingSurfaceVisitationLoggerConfig",this.$1,g.BASIC)};a.prototype.logVital=function(){h.log("logger:FriendingSurfaceVisitationLoggerConfig",this.$1,g.VITAL)};a.prototype.logImmediately=function(){h.log("logger:FriendingSurfaceVisitationLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setBadgeCount=function(a){this.$1.badge_count=a;return this};a.prototype.setClientTimestamp=function(a){this.$1.client_timestamp=a;return this};a.prototype.setRawRefTab=function(a){this.$1.raw_ref_tab=a;return this};a.prototype.setRawTab=function(a){this.$1.raw_tab=a;return this};a.prototype.setRefPage=function(a){this.$1.ref_page=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setTargetProfileID=function(a){this.$1.target_profile_id=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};b={app_version:!0,badge_count:!0,client_timestamp:!0,raw_ref_tab:!0,raw_tab:!0,ref_page:!0,surface:!0,target_profile_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("XFriendRequestIHEventLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/requests/interaction_history_logging/",{target_id:{type:"FBID",required:!0},log_event:{type:"String",required:!0}})}),null);
__d("MFriendRequestIHEventLogger",["DOM","FBJSON","MRequest","XFriendRequestIHEventLoggingController"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();a={listenToProfileClick:function(a,b,c){a=h.parse(a.getAttribute("data-store"));var d=a.userid?a.userid.toString():null;g.listen(c,"click",null,function(){this.logClick(d)}.bind(this));g.listen(b,"click",null,function(){this.logClick(d)}.bind(this))},logImpression:function(a){a&&this._logEvent(a,"impression")},logClick:function(a){a&&this._logEvent(a,"click")},_logEvent:function(a,event){if(isNaN(a))return;a=j.getURIBuilder().setFBID("target_id",a).setString("log_event",event).getURI();new i(a).send()}};e.exports=a}),null);
__d("XExpireFriendRequestsMutationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/requests/expire/",{from_m_jewel:{type:"Bool",defaultValue:!1}})}),null);
__d("MFriendingJewel",["Arbiter","DOM","FriendingSurfaceVisitationTypedLogger","MarauderLogger","MFriendRequestIHEventLogger","MJewel","MJewels","MLegacyDataStore","MLogState","MPymkFunnelLogger","MRequest","MURI","Popover","Stratcom","XExpireFriendRequestsMutationController","invariant"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){"use strict";__p&&__p();var w="/friends/center/requests/",x="/friends/center/kaios/",y,z=!1,A=!1,B=!1;function C(){__p&&__p();y||v(0,2795);g.subscribe("m:jewels:init-counts",D,"all");y.listen("cleared",I);y.listen("jewel_click",F);if(A)return;A=!0;t.listen("jewel_requests_add",null,K);t.listen("jewel_requests_remove_old",null,K);t.listen("friend_requests_expired",null,L);t.listen("jewel_friending_notifs",null,K);t.listen("mobile_requests_count",null,K);t.listen("friend_requests_seen",null,M);t.listen("m:requests:refresh",null,N);t.listen("removed_item_hidden_event",null,N);t.listen("m:jewel:flyout:open",null,E)}function D(event,a){a=a.request_count;if(!y||!a)return;y.reregisterListeners();y.updateCount(a,I)}function E(event){var a=event.getData();if(a.jewel!=="requests")return;new q(u.getURIBuilder().setBool("from_m_jewel",!0).getURI()).send()}function F(){y||v(0,2795),G(),new i().setSurface("jewel").setBadgeCount(y.getCount()).log(),O.lazyLoadRequestsJewelIfTabOpen()}function G(){__p&&__p();y||v(0,2795);var a=y._getContentsElement();if(!a)return;a=h.scry(a,"div","attachment");var b=[];for(var c=0;c<a.length;c++){var d=a[c].getAttribute("id");d&&d.startsWith("m_jewel_req_")&&(b=b.concat(d.replace("m_jewel_req_","")))}if(b.length){d=new q("/friends/requests/log_impressions");d.setMethod("POST");d.addData({ids:b.join(","),ref:"m_jewel"});d.send()}}function H(){__p&&__p();if(z)return;y||v(0,2795);z=!0;var a=y._getContentsElement();a=h.scry(a,"div","undoable-action");for(var b=0;b<a.length;b++){var c=a[b].getAttribute("data-pymk-id");if(c){var d=a[b].getAttribute("data-signature");p.logImpression(c,d,"mobile_jewel")}else{c=n.get(a[b]).userid;j.log("request_seen","friend_request_waterfall",{request_id:c,request_location:"requests_jewel"});k.logImpression(c?c.toString():null)}}}function I(){t.invoke("m_requests_jewel_mark_read");var a=new q(new r("/a/jewel_requests_read.php").toString());a.send()}function J(){new q("/ajax/mobile/friends/jewel/requests_markup").send()}function K(){if(!y)return;if(y.isOpen())return;J()}function L(){if(!y)return;J()}function M(event){if(!y||B)return;y.setCount(0)}function N(){var a=s.getInstance("reqs_flyout");a&&a.refreshConstraints()}var O={initJewel:function(a){y=l.create("requests",{pos:o.CLICK_POSITION_REQUESTS_FLYOUT,softState:m.REQUESTS,noPopover:a.shouldRedirectRequestsJewel,additionalPaths:[w,x],preventClearBadge:a.preventClearBadge}),B=a.preventClearBadge,C()},lazyLoadRequestsJewelIfTabOpen:function(){if(y&&y.isOpen()){var a=y._getContentsElement();if(t.hasSigil(a,"requests-flyout-pagelet-placeholder"))return;t.hasSigil(a,"requests-flyout-loading")?J():H()}},onAfterUpdateFriendRequests:function(a){if(!y)return;!y.isOpen()?y.setCount(a):a&&I();N();y.isOpen()&&H()},onAfterLoadMoreFriendSuggestions:function(){if(!y)return;N()}};e.exports=O}),null);
__d("MMessagesThreadRowID",[],(function(a,b,c,d,e,f){"use strict";var g="other_user_fbid_",h="thread_fbid_";function a(a,b,c){return a+(b?g+b:h+String(c))}e.exports={getThreadRowID:a}}),null);
__d("MessagingEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DELETE:"delete",DELETE_MESSAGES:"delete_messages",DELIVER:"deliver",ERROR:"error",READ:"read",REPORT_SPAM:"report_spam",REPORT_SPAM_MESSAGES:"report_spam_messages",UNMARK_SPAM:"unmark_spam",SUBSCRIBE:"subscribe",CHANGE_MUTE_SETTINGS:"change_mute_settings",TAG:"tag",UNREAD:"unread",UNSUBSCRIBE:"unsubscribe",DELIVER_LOG:"deliver_log",MARK_ALL_READ:"mark_all_read",MARK_ALL_SEEN:"mark_all_seen",MORE_THREADS:"more_threads",READ_ALL:"read_all",READ_RECEIPT:"read_receipt",DELIVERY_RECEIPT:"delivery_receipt",SENT_PUSH:"sent_push",DELIVER_FAST_PAST:"deliver_fast_path",MESSENGER_STATUS:"messenger_status",UPDATE_PINNED_THREADS:"update_pinned_threads",CHANGE_PAGE_THREAD_FLAG:"change_page_thread_flag",CREATE_PAGE_ADMIN_NOTE:"create_page_admin_note",NO_OP:"no_op"})}),null);
__d("XFBConfirmationCliffTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){h.log("logger:XFBConfirmationCliffLoggerConfig",this.$1,g.BASIC)};a.prototype.logVital=function(){h.log("logger:XFBConfirmationCliffLoggerConfig",this.$1,g.VITAL)};a.prototype.logImmediately=function(){h.log("logger:XFBConfirmationCliffLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setCliffCaller=function(a){this.$1.cliff_caller=a;return this};a.prototype.setError=function(a){this.$1.error=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.updateExtraData=function(a){a=i(h.serializeMap(a));h.checkExtraDataFieldNames(a,j);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var j={cliff_caller:!0,error:!0,surface:!0,time:!0,weight:!0};e.exports=a}),null);
__d("XMessagesJewelContentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mobile/messages/jewel/content/",{spinner_id:{type:"String",required:!0}})}),null);
__d("MMessagesJewel",["Arbiter","Bootloader","ChannelEventType","DOM","MessagingEvent","MJewel","MJewelFlyout","MJewels","MLogState","MMessagesThreadRowID","MRequest","MURI","Popover","Stratcom","XFBConfirmationCliffTypedLogger","XMessagesJewelContentController","fbt","invariant","onAfterTTI"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){"use strict";__p&&__p();var z="mJewelMsgThreadContents",A="msg_",B,C=!1,D,E=!1;function F(){B||x(0,2795),g.subscribe("m:jewels:init-counts",G,"all"),B.listen("cleared",I),E||(E=!0,t.listen(i.MESSAGE,null,M),t.listen(i.MESSAGE,null,J),t.listen("m:jewel:flyout:open",null,H))}function G(event,a){__p&&__p();var b=a.viewer_id,c=a.unseen_thread_ids;a=a.unread_thread_ids;b&&(P.viewerID=b);c&&(P.unseenThreadIDs=c.reduce(function(a,b){a[b]=1;return a},{}));a&&(P.unreadThreadIDs=a.reduce(function(a,b){a[b]=1;return a},{}));c&&B&&(B.reregisterListeners(),B.updateCount(c.length,I))}function H(event){var a=event.getData();if(!B||a.jewel!=="messages")return;P.messengerCliff&&new u().setSurface("messenger_seen").log();a=B.getCount();B.setCount(a);L()}function I(){var a=new q(new r("/a/jewel_messages_read.php").toString());a.send()}function J(event){__p&&__p();var a=event.getData();if(!a||!B)return;if(a.event===k.READ&&a.message.folder==="inbox"){var b=a.message.thread_fbid||a.message.other_user_fbid;delete P.unseenThreadIDs[b];delete P.unreadThreadIDs[b]}else if(a.event===k.UNREAD&&a.message.folder==="inbox"){b=a.message.thread_fbid||a.message.other_user_fbid;P.unreadThreadIDs[b]=1}else if(a.event===k.MARK_ALL_READ&&a.message.folder==="inbox")P.unreadThreadIDs={},P.unseenThreadIDs={};else if(a.event===k.MARK_ALL_SEEN&&a.message.folder==="inbox")P.unseenThreadIDs={};else if(a.parsedPayload&&a.folder==="inbox"){b=a.parsedPayload;if(!K(P.viewerID,b)||b.isUnread()===!1||a.message.is_muted)return;a=b.getThreadFBID()||b.getOtherUserFBID();P.unseenThreadIDs[a]=1;P.unreadThreadIDs[a]=1}else return;b=Object.keys(P.unseenThreadIDs).length;a=Object.keys(P.unreadThreadIDs).length;!B.isOpen()&&b!==B.getCount()&&B.setCount(b);b=a>0?w._("Messages ({unread_message_count})",[w._param("unread_message_count",a)]):w._("Messages");a=B.getFlyout();a&&a.setHeaderText("messages_jewel_header_text",b.toString())}function K(a,b){if(!b.getParticipantIDs())return!1;if(b.getParticipantIDs().indexOf(a)>-1)return!0;if(a)return b.getParticipantIDs().indexOf(a.toString())>-1;else return!1}function L(){B||x(0,2795);var a=B._getJewelElement(),b="messages-flyout-loading";a=j.scry(a,"*",b);if(a.length>0){b=v.getURIBuilder().setString("spinner_id",a[0].getAttribute("id")).getURI();D||(D=new q(b),D.listen("finally",function(){D=null}),D.send())}}function M(event){__p&&__p();var a=event.getData();if(!a||!B)return;if(a.parsedPayload){var b=a.parsedPayload;if(!b.getFolder||b.getFolder()!=="inbox"||!K(P.viewerID,b))return;B.isInitialized()&&(m.removeMenuContent(N(b.getOtherUserFBID(),b.getThreadFBID())),B.isOpen()&&I());C||L()}else a.event===k.READ&&a.is_sync&&m.updateMenuColor(N(a.message.other_user_fbid,a.message.thread_fbid),!0,!1)}function N(a,b){return p.getThreadRowID(A,a,b)}function O(a){y(function(){h.loadModules(["MMessagesJewelPrefetch"],function(b){b.init(a)},"MMessagesJewel")})}var P={unseenThreadIDs:{},unreadThreadIDs:{},viewerID:null,messengerCliff:!1,initJewel:function(a){C=!!a.noFlyout,B=l.create("messages",{contentsSigil:z,pos:o.CLICK_POSITION_MESSAGES_FLYOUT,softState:n.MESSAGES,noPopover:C,additionalPaths:["/messages/"]}),F(),!C&&a.prefetchMessageThreads&&O(B)},setMessengerCliff:function(a,b,c){P.messengerCliff=a},refreshMessagesConstraints:function(){s.getInstance("messages_flyout").refreshConstraints()}};e.exports=P}),null);
__d("MTitleListener",["FBLogger","Stratcom"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=!1,j=null,k="",l=!0;function m(){__p&&__p();if(j)return j;var a=document.getElementsByTagName("head");if(!a||!a.length)return null;a=a[0].getElementsByTagName("title");if(!a||!a.length)return null;a=a[0];if(a){a=a.childNodes;a&&a.length&&(j=a[0])}return j}function n(){var a=m();return!a?k:a.nodeValue||k}function o(a){k=a||"";typeof k!=="string"&&(k=String(k));a=m();a&&(a.nodeValue=k);h.invoke("MDocument:title",null,k)}e.exports={getTitle:function(){var a=document.title||k||"";a=typeof a==="string"?a:String(a);return a},getTitleAsString:function(a){a=a===null||a===void 0||typeof a==="object"?this.getTitle():a;a=typeof a==="string"?a:String(a);return a||""},init:function(){__p&&__p();if(i)return l;k=document.title||"";var a={get:function(){return n()},set:function(a){o(a)},enumerable:!0};try{Object.defineProperty(document,"title",a),l=!0}catch(a){l=!1}i=!0;return l}}}),null);
__d("MBackToNewsFeed",["JavelinHistory","MHistory","Stratcom"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=!1,k=[];function l(){if(!k||!k.length)return;k.forEach(function(a){a.remove()});k=[]}var m={init:function(){m.updateHistory()},updateHistory:function(a){__p&&__p();a===void 0&&(a=!1);if(a&&j)return;j=!0;if(!m._isBrowserSupported())return;if(h.hasSoftState())return;if(history.state&&history.state.addedNewsFeed)return;a=location.href;var b=document.title;document.title="Facebook";window.history.replaceState({},"Facebook","/home.php");window.history.pushState({addedNewsFeed:1},"Current",a);document.title=b},updateHistoryOnNav:function(a){__p&&__p();l();a=a.pattern;if(a.length){var b=new RegExp(a);k.push(i.listen("history:change",null,function(event){l();var a=event.getData();if(!a||!a.path)return;a=a.path;b.test(a)&&m.updateHistory()}),i.listen("history:change-default",null,l),i.listen("m:homepage:load",null,l))}},_isBrowserSupported:function(){return g.CAN_USE_PUSH_STATE}};e.exports=m}),null);
__d("UnicodeBidiDirection",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();b="NEUTRAL";var h="LTR",i="RTL";function j(a){return a===h||a===i}function k(a){j(a)||g(0,3045);return a===h?"ltr":"rtl"}function a(a,b){j(a)||g(0,3045);j(b)||g(0,3046);return a===b?null:k(a)}c={NEUTRAL:b,LTR:h,RTL:i,isStrong:j,getHTMLDir:k,getHTMLDirIfDifferent:a};e.exports=c}),null);
__d("UnicodeBidiGlobalDirectionCore",["UnicodeBidiDirection","invariant"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=null;function j(a){i=a}function a(){j(g.LTR)}function b(){i||this.initDir();i||h(0,548);return i}c={setDir:j,initDir:a,getDir:b};e.exports=c}),null);
__d("UnicodeBidiGlobalDirection",["Locale","UnicodeBidiDirection","UnicodeBidiGlobalDirectionCore"],(function(a,b,c,d,e,f,g,h,i){"use strict";i.initDir=function(){i.setDir(g.isRTL()?h.RTL:h.LTR)},e.exports=i}),null);
__d("UnicodeBidi",["UnicodeBidiDirection","UnicodeBidiGlobalDirection","invariant"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();c={L:"A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u02bb-\u02c1\u02d0\u02d1\u02e0-\u02e4\u02ee\u0370-\u0373\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0482\u048a-\u052f\u0531-\u0556\u0559-\u055f\u0561-\u0587\u0589\u0903-\u0939\u093b\u093d-\u0940\u0949-\u094c\u094e-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd-\u09c0\u09c7\u09c8\u09cb\u09cc\u09ce\u09d7\u09dc\u09dd\u09df-\u09e1\u09e6-\u09f1\u09f4-\u09fa\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3e-\u0a40\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd-\u0ac0\u0ac9\u0acb\u0acc\u0ad0\u0ae0\u0ae1\u0ae6-\u0af0\u0b02\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b3e\u0b40\u0b47\u0b48\u0b4b\u0b4c\u0b57\u0b5c\u0b5d\u0b5f-\u0b61\u0b66-\u0b77\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe\u0bbf\u0bc1\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcc\u0bd0\u0bd7\u0be6-\u0bf2\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c41-\u0c44\u0c58\u0c59\u0c60\u0c61\u0c66-\u0c6f\u0c7f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd-\u0cc4\u0cc6-\u0cc8\u0cca\u0ccb\u0cd5\u0cd6\u0cde\u0ce0\u0ce1\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d40\u0d46-\u0d48\u0d4a-\u0d4c\u0d4e\u0d57\u0d60\u0d61\u0d66-\u0d75\u0d79-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dcf-\u0dd1\u0dd8-\u0ddf\u0de6-\u0def\u0df2-\u0df4\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e4f-\u0e5b\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edf\u0f00-\u0f17\u0f1a-\u0f34\u0f36\u0f38\u0f3e-\u0f47\u0f49-\u0f6c\u0f7f\u0f85\u0f88-\u0f8c\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce-\u0fda\u1000-\u102c\u1031\u1038\u103b\u103c\u103f-\u1057\u105a-\u105d\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108c\u108e-\u109c\u109e-\u10c5\u10c7\u10cd\u10d0-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1360-\u137c\u1380-\u138f\u13a0-\u13f4\u1401-\u167f\u1681-\u169a\u16a0-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1735\u1736\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17b6\u17be-\u17c5\u17c7\u17c8\u17d4-\u17da\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1923-\u1926\u1929-\u192b\u1930\u1931\u1933-\u1938\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19da\u1a00-\u1a16\u1a19\u1a1a\u1a1e-\u1a55\u1a57\u1a61\u1a63\u1a64\u1a6d-\u1a72\u1a80-\u1a89\u1a90-\u1a99\u1aa0-\u1aad\u1b04-\u1b33\u1b35\u1b3b\u1b3d-\u1b41\u1b43-\u1b4b\u1b50-\u1b6a\u1b74-\u1b7c\u1b82-\u1ba1\u1ba6\u1ba7\u1baa\u1bae-\u1be5\u1be7\u1bea-\u1bec\u1bee\u1bf2\u1bf3\u1bfc-\u1c2b\u1c34\u1c35\u1c3b-\u1c49\u1c4d-\u1c7f\u1cc0-\u1cc7\u1cd3\u1ce1\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200e\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u214f\u2160-\u2188\u2336-\u237a\u2395\u249c-\u24e9\u26ac\u2800-\u28ff\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d70\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u302e\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u3190-\u31ba\u31f0-\u321c\u3220-\u324f\u3260-\u327b\u327f-\u32b0\u32c0-\u32cb\u32d0-\u32fe\u3300-\u3376\u337b-\u33dd\u33e0-\u33fe\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua60c\ua610-\ua62b\ua640-\ua66e\ua680-\ua69d\ua6a0-\ua6ef\ua6f2-\ua6f7\ua722-\ua787\ua789-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua824\ua827\ua830-\ua837\ua840-\ua873\ua880-\ua8c3\ua8ce-\ua8d9\ua8f2-\ua8fb\ua900-\ua925\ua92e-\ua946\ua952\ua953\ua95f-\ua97c\ua983-\ua9b2\ua9b4\ua9b5\ua9ba\ua9bb\ua9bd-\ua9cd\ua9cf-\ua9d9\ua9de-\ua9e4\ua9e6-\ua9fe\uaa00-\uaa28\uaa2f\uaa30\uaa33\uaa34\uaa40-\uaa42\uaa44-\uaa4b\uaa4d\uaa50-\uaa59\uaa5c-\uaa7b\uaa7d-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaaeb\uaaee-\uaaf5\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5f\uab64\uab65\uabc0-\uabe4\uabe6\uabe7\uabe9-\uabec\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\ue000-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",R:"\u0590\u05be\u05c0\u05c3\u05c6\u05c8-\u05ff\u07c0-\u07ea\u07f4\u07f5\u07fa-\u0815\u081a\u0824\u0828\u082e-\u0858\u085c-\u089f\u200f\ufb1d\ufb1f-\ufb28\ufb2a-\ufb4f",AL:"\u0608\u060b\u060d\u061b-\u064a\u066d-\u066f\u0671-\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u0710\u0712-\u072f\u074b-\u07a5\u07b1-\u07bf\u08a0-\u08e3\ufb50-\ufd3d\ufd40-\ufdcf\ufdf0-\ufdfc\ufdfe\ufdff\ufe70-\ufefe"};var j=new RegExp("["+c.L+c.R+c.AL+"]"),k=new RegExp("["+c.R+c.AL+"]");function l(a){a=j.exec(a);return a==null?null:a[0]}function m(a){a=l(a);return a==null?g.NEUTRAL:k.exec(a)?g.RTL:g.LTR}function n(a,b){b=b||g.NEUTRAL;if(!a.length)return b;a=m(a);return a===g.NEUTRAL?b:a}function o(a,b){b||(b=h.getDir());g.isStrong(b)||i(0,451);return n(a,b)}function a(a,b){return o(a,b)===g.LTR}function b(a,b){return o(a,b)===g.RTL}d={firstStrongChar:l,firstStrongCharDir:m,resolveBlockDir:n,getDirection:o,isDirectionLTR:a,isDirectionRTL:b};e.exports=d}),null);
__d("isElementPartiallyInViewport",["getElementRect","getViewportDimensions"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){var b=h();if(!b.width||!b.height)return!1;a=g(a);if(!a.width||!a.height)return!1;var c=a.top<=b.height&&a.top+a.height>=0;b=a.left<=b.width&&a.left+a.width>=0;return c&&b}e.exports=a}),null);
__d("MBackNavbar",["CSS","DOM","Event","MAnimator","MArrays","MBackToNewsFeed","MHeaderLogger","MHistory","MHome","MPageCache","MPageController","MStoriesUIConstants","MTitleListener","MURI","MViewport","Stratcom","UnicodeBidi","UnicodeBidiDirection","Vector","cx","getViewportDimensions","isElementPartiallyInViewport","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,aa,ba,ca,da,y){"use strict";__p&&__p();var z=!1,A=!1,B=!1,C=[],D=!1,E=!1,F=!1,G=[],H=[],I=null,J=null,K=x.LTR,L=!1,M=!1,N=!0,O=null,P=!1,Q=!1,R=!1,S=!1;function T(a){return a.split(",").map(function(a){a=a.toLowerCase();a.startsWith("/")||(a="/"+a);return a})}function U(){if(L||!D)return;l.updateHistory(!0)}function ea(a){try{a=new t(a);a=a.getDomain()}catch(b){a=""}return a}function fa(){var a=ga();if(!a)return!1;a=ea(a);return a.length>0&&!a.endsWith(".facebook.com")}function V(a,b,c){__p&&__p();c=s.getTitleAsString(c);if(!c||typeof c.split!=="function")return;c=c.split("\n").join(" ");b.innerText=c;K=w.getDirection(c,K);switch(K){case x.RTL:g.addClass(a,"rtl");break;default:g.removeClass(a,"rtl")}}function W(a,b,c,d){__p&&__p();var e=[];N&&(b.innerText="",e.push(v.listen("MDocument:title",null,function(event){var c=null;event&&(c=event.getData());V(a,b,c)})),V(a,b));var f=function(){P=!0,history.go(-1)};M?(c&&e.push(i.listen(c,"click",f)),d&&e.push(i.listen(d,"click",f))):e.push(i.listen(a,"click",f));var g=!1;return function(){if(g)return;g=!0;e.forEach(function(a){a.remove()})}}var X=!0;function ga(){if(X){X=!1;return document.referrer}return""}function Y(a){return k.findPrefix(H,a)}function Z(a){a=a||n.getPath();var b="";if(a)try{a=new t(a).normalize();b=a.getPath().toLowerCase()}catch(a){b=""}return b}function ha(a){__p&&__p();var b=fa();if(E&&!b)return!1;b=Z(a);if(Y(b))return!1;if(F)return!0;if(!G.length)return!1;for(var a=0;a<G.length;a++)if(b.indexOf(G[a])!==-1)return!0;return!1}function $(){__p&&__p();J&&(J(),J=null);if(!I)return;var a=I;y(function(){__p&&__p();var b=n.getPath(),c=o.isHome()&&!n.hasSoftState(),d=null,e=null;M&&(d=document.getElementById("MBackNavBarLeftArrow"),e=document.getElementById("MBackNavBarRightArrow"));var f=c||n.hasSoftState()||M&&!d&&!e||!ha(b);if(f){g.removeClass(a,"show");if(A&&H.length&&C.length){f=Z();Y(f)&&k.findPrefix(C,f)&&m.logExposure(!0)}if(c&&R&&P){P=!1;f=document.getElementById("page");if(f){c=h.scry(f,"article","story-div");var i=null;for(var f=c.length-1;f>=0;f--)if(da(c[f]))break;else i=c[f];if(i){g.show(i);var l=ca();y(function(){var a=u.getScrollTop(),b=aa.getPos(i).y-l.height+300,c=Math.abs(b-a),d=a;j.play(a,b,500,function(a){var b=j.easeInOutCubic((a-d)/c);b=Math.round((a-d)*b+d);d=a;u.scrollToY(b)})},800)}}}}else{if(A){c=!1;if(B){f=Z(b);(C.length===0||k.findPrefix(C,f))&&(c=!0)}m.logExposure(c)}if(!D)return;O&&(M?J=W(a,O,d,e):J=W(a,O));g.addClass(a,"show");Q&&U()}},1)}function ia(a){__p&&__p();if(z)return;z=!0;I=a.element;D=a.enabled;A=a.logExposure;B=a.qeExposure;E=a.enabledForExternalReferer;F=a.allPages;L=a.backToFeedDisabled;M=a.backOnArrowClick;O=a.linkElement;var b=a.forceRefreshFeed;R=b?!1:a.scrollToNextFeedItem;Q=a.modifyHistoryOnNav;!F?G=T(a.pages):a.excludedPages.length&&(H=T(a.excludedPages));a.exposurePages&&(C=T(a.exposurePages));H.length?H=H.concat(r.HIDE_HEADER_URLS):H=r.HIDE_HEADER_URLS;v.listen("history:change",null,$);v.listen("m:homepage:load",null,$);N=!a.staticTitle;D&&N&&(N=s.init());N||g.addClass(O,"_6sow");if(!Q){a=Z();a=Y(a);a||U()}$();b&&D&&(v.listen("m:page:beforeloading",null,function(event){__p&&__p();var a=P;P=!1;if(!event)return;var b=event.getData();if(!b)return;var c=q.getRenderedPath();c=c&&o.isHome(c);if(c){S=!1;c=b.indexOf("?");if(c===-1)return;try{c=new t(b);c=c.getQueryData()||{}}catch(a){c={}}c=c._bb_norefresh;c==="1"&&(S=!0)}else{c=o.isHome(b);var d=S;S=!1;a&&b&&c&&!d&&p.removeCachedPage(b)}}),v.listen("m:backnav:invalidate-cached-feed",null,function(){S=!1}))}e.exports={init:function(a){ia(a)}}}),null);
__d("MPopoverClose",["Popover"],(function(a,b,c,d,e,f,g){a=function(){g._activePopover&&g._activePopover.close()};f.main=a}),null);