if (self.CavalryLogger) { CavalryLogger.start_js(["JYZjo"]); }

__d("OGComposerConstants",[],(function(a,b,c,d,e,f){e.exports={EditAttachmentURI:"/ajax/composerx/attachment/edit/",ExercisesTypeID:718343998201893,TransitivityStateIntransitive:2}}),null);
__d("MCompositionShareStore",["MCompositionShareFields","MCompositionStore","MCompositionStoreID","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();a=b("MCompositionConstants").ActionTypes;var k=new h(i.SHARE,g).setHandlerFor(a.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(a.SHARE_LINK_UPDATE,function(a){return babelHelpers["extends"]({},k.getAll(),a)}).setHandlerFor(a.SHARE_REMOVE_PREVIEW,function(a){a=a||{};var b=g.DISABLED_LINKS,c=k.getAll(),d={};d[b]=babelHelpers["extends"]({},c[b],a[b]);d[g.SHARE_URI]=null;d[g.LINK_NO_CHANGE]=!1;return babelHelpers["extends"]({},c,d)}).register();e.exports=k}),null);
__d("MPlacesCategorySelector",["DOM","MLegacyDataStore","MRequest","Stratcom","createDeprecatedProperties","eventsMixinDeprecated"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();function a(a){"use strict";this._root=a,this._listeners=[j.listen("click",[a.getAttribute("data-sigil"),"cancel_places_category_selector"],this._cancel.bind(this)),j.listen("click",[a.getAttribute("data-sigil"),"category_option"],this._submit.bind(this))],this._currentlyMakingServerRequest=!1,this._viewcount=1}a.prototype.hide=function(){"use strict";g.hide(this._root)};a.prototype.show=function(){"use strict";g.show(this._root)};a.prototype.cleanup=function(){"use strict";while(this._listeners.length)this._listeners.pop().remove()};a.prototype._hideCurrentChild=function(){"use strict";for(var a=0;a<this._viewcount-1;a++){if(!this._root.childNodes[a])return;g.hide(this._root.childNodes[a])}};a.prototype._showCurrentChild=function(){"use strict";if(this._viewcount>=1){var a=this._getCurrentVisibleView();g.show(a)}};a.prototype._deleteLastChild=function(){"use strict";var a=this._root.childElementCount;a>=1&&g.remove(this._root.childNodes[a-1])};a.prototype._deleteAllChildren=function(){"use strict";var a=this._root.childElementCount;for(var b=a-1;b>=1;b--)g.remove(this._root.childNodes[b]);a>=1&&g.show(this._root.childNodes[0]);this._viewcount=1};a.prototype._getCurrentVisibleView=function(){"use strict";return this._root.childNodes[this._viewcount-1]};a.prototype._submit=function(event){"use strict";__p&&__p();if(this._currentlyMakingServerRequest)return;var a=this._getCurrentVisibleView(),b=g.find(a,"*","loading"),c=g.find(a,"div","category-list-view");a=h.get(event.getNode("category_option"));if(a.haschildren){this._currentlyMakingServerRequest=!0;this._hideCurrentChild();g.show(b);g.hide(c);var d=new i("/places/addform/category.php");d.listen("done",function(){this._viewcount=this._viewcount+1,this._hideCurrentChild(),this._currentlyMakingServerRequest=!1,g.hide(b),g.show(c)}.bind(this));d.addData({parent_category_id:a.id,target_id:this._root.id});d.setMethod("GET");d.send()}else{this._deleteAllChildren();this._currentid=null;d={category_name:a.name,category_value:a.id};this.hide();this.invoke("submit",d)}event.kill()};a.prototype._cancel=function(event){"use strict";if(this._currentlyMakingServerRequest)return;this._viewcount>1?(this._deleteLastChild(),this._viewcount--,this._showCurrentChild()):(this.hide(),this.invoke("cancel"))};l(a,["submit","cancel"]);k(a,{disableFacewebHooks:!1});Object.assign(a.prototype,{_root:null,_currentlyMakingServerRequest:null,_viewcount:null});e.exports=a}),null);
__d("MPlacesAddView",["DOM","FBJSON","MPlacesCategorySelector","MRequest","Stratcom","ge"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,A=null,B=null,C=null,D=!0,E={init:function(j){__p&&__p();m=l(j);if(!m)return;s=g.scry(m,"div","places-category-selector-container")[0];s?(p=new i(s),o=g.find(m,"div","add-place-form"),a=g.find(m,"div","new-place-name"),t=g.find(a,"input",""),b=g.find(m,"div","new-place-address"),u=g.find(b,"input",""),c=g.find(m,"div","new-place-phone"),v=g.find(c,"input",""),d=g.find(m,"div","new-place-website"),w=g.find(d,"input",""),f=g.find(m,"div","new-place-zip"),x=g.find(f,"input",""),A=g.scry(m,"input","is_current")[0],q=g.find(m,"span","category_input_display_text"),r=g.scry(m,"input","category_input_value")[0],y=g.scry(m.parentNode.parentNode,"div","place-header")[0],z=g.find(m,"div","address-error-box")):t=g.find(m,"input","new-place-name");n=g.find(m,"button","add_place_submit");this._listeners=[k.listen("click","add_place_submit",E._verifyAndSubmitAddPlace.bind(this)),k.listen("MStructuredComposer:cleanup",null,E._cleanup.bind(this)),k.listen("m:places:map:move",null,function(event){B=event.getData().lat,C=event.getData().lng}),k.listen("m:places:map:render",null,function(event){var a=h.parse(event.getData(),e.id);B=a.latitude;C=a.longitude})];t.addEventListener("focus",function(){D&&(t.blur(),D=!1)});s&&(this._listeners.push(k.listen("click","category-selector",E._showCategorySelector.bind(this))),this._listeners.push(p.listen("cancel",E._cancelCategorySelector.bind(this))),this._listeners.push(p.listen("submit",E._submitCategorySelector.bind(this))))},_cleanup:function(){while(this._listeners.length)this._listeners.pop().remove();p&&p.cleanup()},_showCategorySelector:function(event){y&&g.hide(y),g.hide(o),g.show(s),event.kill()},_showAddButton:function(){return!r.value?!1:!0},_updateCategorySelector:function(a){if(q&&a){var b=a.category_name;a=a.category_value;g.setContent(q,b);a.length!==0&&(r.value=a,n.disabled&&E._showAddButton()&&(n.disabled=!1))}},_submitCategorySelector:function(event){E._updateCategorySelector(event),g.hide(s),g.show(o),k.invoke("m:places:addplace:show"),D=!0,y&&g.show(y)},_cancelCategorySelector:function(){g.hide(s),g.show(o),k.invoke("m:places:addplace:show"),D=!0,y&&g.show(y)},_verifyAndSubmitAddPlace:function(event){__p&&__p();var a={new_place:!0,name:t.value};s&&(a.phone=v.value,a.address=u.value,a.website=w.value,a.zip=x.value);a.is_current=!0;A&&(a.is_current=A.checked);B&&(a.latitude=B,a.longitude=C);if(r)a.topic_tokens=r;else{var b=g.scry(m,"span","token");a.topic_tokens=b}if(a.address){b=new j("/places/addform/verifyaddress.php");b.listen("done",function(b){b.actions.length===1?this._submitData(a,event):event.kill()}.bind(this));b.setData({address:a.address,latitude:a.latitude,longitude:a.longitude,target_id:z.id}).setMethod("GET").send()}else this._submitData(a,event)},_submitData:function(a,event){a.name.length!==0?(g.hide(m),k.invoke("m:places:addform:submit",null,a)):event.kill()}};e.exports=E}),null);
__d("MPlaces",["DOM","LoadingIndicator","MLegacyDataStore","MPageController","MRequest","Stratcom","URI","ViewerLocationSource","XPlacesUpdateLocationController","$","FWLoader"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q=b("FWLoader").FW,r={LINK_SIGIL:"gps-link",FORM_SIGIL:"gps-form",UPDATE_LOCATION_INTERVAL:6e4,desiredProperties:["latitude","longitude","accuracy","altitude","altitudeAccuracy","heading","speed"],locationOptions:{enableHighAccuracy:!0,timeout:6e4,maximumAge:3e5},watchID:null,pendingHref:"",pendingForm:null,_JSONLocation:"",_currentSearchMode:null,_lastUpdateTime:0,enableFWGeolocation:!0,locationSearchModes:{SEARCH_MODE:"m",MODE_COMPOSER:"cp",MODE_CHECKIN:"ci"},setCurrentJSONLocation:function(a){r._JSONLocation=a},getCurrentJSONLocation:function(){return r._JSONLocation},setLocationSearchMode:function(a){r._currentSearchMode=a},getLocationSearchMode:function(){return r._currentSearchMode},shouldUseFWGeolocation:function(){return window.FW_ENABLED&&q.isIOS()&&r.enableFWGeolocation},updateLocation:function(a){__p&&__p();if(a){r.shouldUseFWGeolocation()&&(a={coords:a});var b={},c;for(var d=0;d<r.desiredProperties.length;d++)c=r.desiredProperties[d],a.coords[c]&&(b[c]=a.coords[c]);a.timestamp&&(b.timestamp=a.timestamp/1e3);r._JSONLocation=JSON.stringify(b);r.sendCurrentLocationToServer();r.pendingForm?r.submitForm(r.pendingForm):r.pendingHref&&r.gotoPage(r.pendingHref);r.pendingForm=null;r.pendingHref="";l.invoke("location-update",null,{position:a})}},handleError:function(a){r.clearWatch(),l.invoke("location-error",null,{error:a}),r.pendingForm?(r.submitForm(r.pendingForm),r.pendingForm=null):r.pendingHref&&(r.gotoPage(r.pendingHref),r.pendingHref="")},sendCurrentLocationToServer:function(){var a=Date.now();if(a-r._lastUpdateTime>r.UPDATE_LOCATION_INTERVAL){r._lastUpdateTime=a;a=o.getURIBuilder().setString("json_location",r._JSONLocation).setEnum("source",n.MSITE_PLACES).getURI();new k(a).setMethod("POST").send()}},gotoPage:function(a){a=new m(a);a.addQueryData("json_location",r._JSONLocation);j.load(a)},submitForm:function(a){a.appendChild(g.create("input",{name:"json_location",type:"hidden",value:r._JSONLocation})),(!a.onsubmit||a.onsubmit())&&a.submit()},clearWatch:function(){if(!r.watchID)return;r.shouldUseFWGeolocation()?q.geolocation.clearWatch():navigator.geolocation.clearWatch(r.watchID);r.watchID=null},watchPosition:function(){if(r.shouldUseFWGeolocation())r.watchID=1,q.geolocation.watchPosition(r.updateLocation,r.handleError),q.geolocation.getCurrentPosition(r.updateLocation);else{var a=setTimeout(r.handleError,r.locationOptions.timeout);r.watchID=navigator.geolocation.watchPosition(function(b){clearTimeout(a),r.updateLocation(b)},function(b){clearTimeout(a),r.handleError(b)},r.locationOptions)}},monitorLocation:function(){r.clearWatch(),r.watchPosition(),k.listen("postprocess",function(){!document.getElementById("place_update")&&r.watchID&&r.clearWatch()})},submitFormWithLocation:function(a){__p&&__p();typeof a==="string"&&(a=p(a));var b=r;h.show();if(b.watchID&&b._JSONLocation){b.submitForm(a);return}b.pendingHref="";b.pendingForm=a;b.monitorLocation();return!1},gotoPageWithLocation:function(a){__p&&__p();var b=r;h.show();if(b.watchID&&b._JSONLocation){b.gotoPage(a);return}b.pendingForm=null;b.pendingHref=a;b.monitorLocation();return!1},onClick:function(event){event.kill();var a=i.get(event.getNode(r.LINK_SIGIL));r.gotoPageWithLocation(a.href)},onSubmit:function(event){event.kill();var a=g.find(event.getNode(r.FORM_SIGIL),"form");r.submitFormWithLocation(a)}};e.exports=r}),null);
__d("MPlacesTagger",["DOM","MLegacyDataStore","MParent","MPlaces","MRequest","MTaggingCounter","MTaggingCounterEvent","Stratcom","$","eventsMixinDeprecated","fbt","FWLoader"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){__p&&__p();var r=b("FWLoader").FW;function s(a,b){"use strict";this._root=a,this._addPlaceView=g.find(a,"div","add-place"),this._disableFacewebHooks=!1,this._errorMessage=g.find(a,"div","error-message"),this._isOpen=!1,this._searchView=g.find(a,"div","places-search"),this._throbber=g.find(a,"div","throbber"),this._locationToggle=g.scry(a,"div","location-toggle")[0],this._newPlaceName=g.scry(a,"div","new-place-name")[0],this._overrideLocation=b,this._newPlaceName?this._newPlaceNameTextbox=g.find(this._newPlaceName,"input",""):this._newPlaceNameTextbox=g.find(this._addPlaceView,"input","new-place-name"),window.FW_ENABLED||(this._placeHeader=g.find(a,"div","place-header")),this._listeners=[n.listen("click","cancel_at_tagger",this._cancel.bind(this)),n.listen("click","place_result",this._submit.bind(this)),n.listen("click","add_place_link",this._showAddPlace.bind(this)),n.listen("click","freeform_link",this._submitFreeformPlace.bind(this)),n.listen("click","get-location",this._getLocation.bind(this)),n.listen("click","abort-location",this._abortLocation.bind(this)),n.listen("m:places:addform:submit",null,this._submitAddPlace.bind(this)),n.listen("m:page:unload",null,this.cleanup.bind(this))]}s.prototype.cleanup=function(){"use strict";for(var a=0;a<this._listeners.length;a++)this._listeners[a].remove();this._listeners=[]};s.prototype.getDisableFacewebHooks=function(){"use strict";return this._disableFacewebHooks};s.prototype.getRoot=function(){"use strict";return this._root};s.prototype.hide=function(){"use strict";window.FW_ENABLED&&r.setNavBarButton("","1;"),g.hide(this._addPlaceView),g.show(this._searchView),g.hide(this._root),this._isOpen=!1};s.prototype.setDisableFacewebHooks=function(a){"use strict";this._disableFacewebHooks=a};s.prototype.show=function(){"use strict";this._isOpen=!0,this._locationToggle&&g.hide(this._throbber),window.FW_ENABLED?r.setNavBarButton(q._("Cancel"),this._cancel.bind(this)):this._locationToggle&&!this._hasLocation&&g.show(this._locationToggle),this._locationToggle?this._showed():this._overrideLocation?setTimeout(function(){n.invoke("m:quicksearch:places:search-with-location",null,this._overrideLocation),this._showed()}.bind(this),0):!this._hasLocation&&"geolocation"in navigator?(l.logEvent(m.GEO_POPUP_LOAD),this._locationListener=n.listen("location-update",null,this._handleLocationUpdate.bind(this)),this._errorListener=n.listen("location-error",null,this._handleLocationError.bind(this)),j.monitorLocation()):this._showed(),g.show(this._root)};s.prototype._getLocation=function(){"use strict";!this._hasLocation&&"geolocation"in navigator&&(this._locationListener=n.listen("location-update",null,this._handleLocationUpdate.bind(this)),this._errorListener=n.listen("location-error",null,this._handleLocationError.bind(this)),g.show(this._throbber),g.hide(this._locationToggle),j.monitorLocation())};s.prototype._abortLocation=function(){"use strict";g.hide(this._throbber),g.hide(this._locationToggle),g.hide(this._errorMessage)};s.prototype._removeListeners=function(){"use strict";this._locationListener.remove(),this._errorListener.remove()};s.prototype._handleLocationUpdate=function(event){"use strict";this._removeListeners(),this._hasLocation=!0,n.invoke("m:quicksearch:places:search"),this._locationToggle||l.logEvent(m.GEO_POPUP_SUCCESS),this._showed()};s.prototype._handleLocationError=function(event){"use strict";this._removeListeners(),this._hasLocation=!1,g.show(this._errorMessage),g.hide(this._throbber),this._locationToggle?g.show(this._locationToggle):l.logEvent(m.GEO_POPUP_FAIL),this._showed()};s.prototype._showed=function(){"use strict";if(!this._isOpen)return;window.FW_ENABLED&&!this.getDisableFacewebHooks()&&(r.setNavBarTitle(q._("Add a Place")),r.setNavBarButton(q._("Cancel"),this._cancel.bind(this),r.BUTTON_CANCEL,!1,"left"));this.invoke("showed");g.show(this._root)};s.prototype._cancel=function(){"use strict";this.invoke("cancel").getPrevented()||(n.invoke("m:quicksearch:places:cancel"),this.hide())};s.prototype._submit=function(event){"use strict";__p&&__p();if(i.bySigil(event.getTarget(),"place-tagger")!==this._root)return;var a=h.get(event.getNode("place_result"));a.new_place=!1;this._placeResult=a;n.invoke("m:quicksearch:places:click",null,{results:event.getNode("id:places_search_results"),selected_result:event.getNode("place_result")});n.invoke("m:places-tagger:submit",null,a);this.invoke("submit",a);event.kill()};s.prototype._showAddPlace=function(event){"use strict";var a=h.get(event.getNode("add_place_link")).name;this._newPlaceNameTextbox.value=a;g.hide(this._searchView);g.show(this._addPlaceView);a=g.scry(this._addPlaceView,"*","map_view_container")[0];a&&new k("/places/showmap.php").addData({target_id:a.id}).setMethod("GET").send();n.invoke("m:places:addplace:show");event.kill()};s.prototype._submitAddPlace=function(event){"use strict";var a=event.getData();this.hide();this.invoke("submit",a);event.kill()};s.prototype._submitFreeformPlace=function(event){"use strict";var a=h.get(event.getNode("freeform_link"));this.hide();this.invoke("submit",a);event.kill()};s.fromID=function(a){"use strict";a=o(a);var b=h.get(a);b._placesTagger||(b._placesTagger=new s(a));return b._placesTagger};p(s,["searching","showed","submit","cancel"]);Object.assign(s.prototype,{_hasLocation:!1,_locationListener:null,_errorListener:null,_root:null,_addPlaceView:null,_errorMessage:null,_newPlaceName:null,_newPlaceNameTextbox:null,_searchView:null,_throbber:null,_listeners:null,_placeResult:null});e.exports=s}),null);
__d("MSubscriptionsHandlerMixin",["SubscriptionsHandler","destroyOnUnload"],(function(a,b,c,d,e,f,g,h){a={__subscriptionsHandler:null,addSubscriptions:function(){this.__subscriptionsHandler||(this.__subscriptionsHandler=new g(),h(function(){this.__subscriptionsHandler.release(),this.__subscriptionsHandler=null}.bind(this)));for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.__subscriptionsHandler.addSubscriptions.apply(this.__subscriptionsHandler,b)}};e.exports=a}),null);
__d("MComposerDialogClearablePreview",["DOM","MSubscriptionsHandlerMixin","Stratcom","mixin","mixInEventEmitter","MComposerDialogClearablePreviewConstants"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l,m=b("MComposerDialogClearablePreviewConstants").sigils;c=babelHelpers.inherits(a,j(h));l=c&&c.prototype;function a(a,b){"use strict";l.constructor.call(this),this.$MComposerDialogClearablePreview1=b,this.$MComposerDialogClearablePreview2=a,this.addSubscriptions(g.listen(this.$MComposerDialogClearablePreview2,"click",m.CLEAR,this.$MComposerDialogClearablePreview3.bind(this)))}a.prototype.clear=function(){"use strict";this.hide();g.setContent(this.$MComposerDialogClearablePreview1,"");return this};a.prototype.$MComposerDialogClearablePreview3=function(){"use strict";this.clear();this.emit("clear");i.invoke("m:quicksearch:places:clear",null,null);return this};a.prototype.hide=function(){"use strict";g.hide(this.$MComposerDialogClearablePreview2);return this};a.prototype.setValue=function(a){"use strict";g.setContent(this.$MComposerDialogClearablePreview1,a);this.show();return this};a.prototype.show=function(){"use strict";g.show(this.$MComposerDialogClearablePreview2);return this};a.prototype.showIfHasValue=function(){"use strict";return this.$MComposerDialogClearablePreview1.innerText?this.show():this.hide()};k(a,{clear:!0});e.exports=a}),null);
__d("MComposerOGStrings",["MinutiaeVerbs","OGComposerConstants","fbt"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a={getFBTPhrase:function(a,b,c,d){__p&&__p();d="";switch(a){case g.COMPOSER_FEELS:d=i._("{icon}feeling {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_WATCHES:d=i._("{icon}watching {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_READS:d=i._("{icon}reading {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_LISTENS:d=i._("{icon}listening to {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_DRINKS:d=i._("{icon}drinking {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_EATS:d=i._("{icon}eating {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_PLAYS:d=i._("{icon}playing {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_TRAVELS:d=i._("{icon}traveling to {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_LOOKS_FOR:d=i._("{icon}looking for {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_SUPPORTS:d=i._("{icon}supporting {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_CELEBRATES:d=i._("{icon}celebrating {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_MEETS:d=i._("{icon}meeting {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_GETS:d=i._("{icon}getting {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_MAKES:d=i._("{icon}making {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_GOES_TO:d=i._("{icon}going to {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_THINKS_ABOUT:d=i._("{icon}thinking about {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_REMEMBERS:d=i._("{icon}remembering {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_WRITES_A_NOVEL_ABOUT:d=i._("{icon}writing a novel about {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_SELECTS_VERB:d=i._("{icon}{verb}",[i._param("icon",b),i._param("verb",c)]);break;case g.COMPOSER_OTHER:d=i._("{icon}{object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_VOTES:d=i._("{icon}voting in {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_ATTENDS:d=i._("{icon}attending {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_AGREES:d=i._("{icon}agrees with {object}",[i._param("icon",b),i._param("object",c)]);break;case g.COMPOSER_DISAGREES:d=i._("{icon}disagrees with {object}",[i._param("icon",b),i._param("object",c)]);break;case h.ExercisesTypeID:d=i._("{icon}{object}",[i._param("icon",b),i._param("object",c)]);break}return d}};e.exports=a}),null);
__d("MOpenGraphTagger",["CSS","DOM","MarauderLogger","MComposerOGStrings","MCompositionShareStore","MLegacyDataStore","MRequest","Stratcom","$","cx","eventsMixinDeprecated","fbt"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){__p&&__p();function s(a){"use strict";__p&&__p();this.setRoot(a),this._prompt=h.find(a,"span","og-composer-prompt"),this._defaultPrompt=this._prompt.firstChild,this._defaultIconSelector=h.find(a,"div","og-icon-selector"),this._iconSelector=this._defaultIconSelector,this._cancelButton=h.find(a,"button","cancel-og-tagger"),this._defaultCancelButtonText=this._cancelButton.firstChild,this._isFromActivityLink=!1,h.listen(this.getRoot(),"click",null,this._handleClick.bind(this)),this._listeners=[n.listen("click","object_result",function(event){__p&&__p();event.prevent();var a=event.getNode("object_result"),b=l.get(a);this._objectID=b.id;this._objectStr=b.name;this._icon=b.icon;this._iconSrc=b.icon_src;this._selectedScore=b.score;this._selectedOriginalID=b.original_id;this._clientTime=b.client_time;this._requestID=b.request_id;this._triggersEventTagExpansion=b.triggers_event_tag_expansion;this._addLoggingDataForNodes(a.parentNode.childNodes);this._showAttachment=k.isEmpty()&&b.show_attachment;this._customIconID=b.custom_icon;this._submit()}.bind(this)),n.listen("click","at_result",function(event){event.prevent(),this._selectActionType(l.get(event.getNode("at_result"))),i.log("og_composer_verb_selected",void 0,{at_id:this._actionType.id,place_id:this._placeID})}.bind(this)),n.listen("click","quicksearch-input",function(event){if(event.getNode("og-object-search")){var a={at_id:this._actionType.id,place_id:this._placeID};i.log("og_composer_object_search_clicked",void 0,a)}}.bind(this)),n.listen("keyup","quicksearch-input",function(event){var a=event.getNode("quicksearch-input");a&&(this._query=a.value,this._keystrokeCount++,this._lastNotBackspacedQuery.indexOf(this._query)!==0&&(this._lastNotBackspacedQuery=this._query))}.bind(this)),n.listen("composerReset",null,function(event){this._reset(),this._placeID=0}.bind(this))],n.listen("MStructuredComposer:cleanup",null,function(event){for(var a=0;a<this._listeners.length;a++)this._listeners[a].remove();this._listeners=[]}.bind(this)),n.listen("MStructuredComposer-opened",null,function(event){this._compositionID=event.getData().session_id}.bind(this))}s.prototype.getRoot=function(){"use strict";return this.root};s.prototype.setRoot=function(a){"use strict";this.root=a};s.prototype.hide=function(){"use strict";h.hide(this.getRoot()),this.toggleIncludedPlaceSelector(!1)};s.prototype.show=function(){"use strict";h.show(this.getRoot())};s.prototype.updatePrompt=function(a){"use strict";h.setContent(this._prompt,a)};s.prototype.setPlaceID=function(a){"use strict";this._placeID=a};s.prototype.setSuggestionMechanism=function(a){"use strict";this._suggestionMechanism=a};s.prototype.toggleIncludedPlaceSelector=function(a){"use strict";var b=h.scry(this.getRoot(),"div","og_included_place");b.length&&(this._isFromActivityLink=a,a?h.show(b[0]):h.hide(b[0]))};s.prototype._handleClick=function(event){"use strict";event.getNode("cancel-og-tagger")&&this.cancel()};s.prototype._reset=function(){"use strict";__p&&__p();var a=h.scry(this.getRoot(),"div","og-object-search");a.length!==0&&(h.hide(a[0]),this._showActionTypeSelector());this._hideIconSelector();this._actionType=null;this._suggestionMechanism=null;this._typeaheadSessionID=null;this._candidateResults=null;this._query=null;this._selectedScore=null;this._selectedOriginalID=null;this._clientTime=null;this._requestID=null;this._lastNotBackspacedQuery=null;this._keystrokeCount=null;this.updatePrompt(this._defaultPrompt);this.setCancelButtonText(this._defaultCancelButtonText);n.invoke("m:quicksearch:clear")};s.prototype._addLoggingDataForNodes=function(a){"use strict";this._candidateResults=[];this._numResults=a.length;for(var b=0;b<this._numResults;++b){var c=l.get(a[b]);this._objectID==c.id&&(this._selectedPos=b);this._candidateResults[b]=c.id?c.id:0}};s.prototype._cancelTypeaheadSession=function(){"use strict";if(!this._typeaheadSessionID)return;this._triggersEventTagExpansion=!1;this._objectID=null;var a=h.scry(this.getRoot(),"div","object_result");this._addLoggingDataForNodes(a);i.log("og_composer_session_abandoned",void 0,{action_type_id:String(this._actionType.id),place_id:this._placeID,typeahead_session_id:this._typeaheadSessionID,composer_session_id:this._compositionID,request_id:this._requestID,candidate_results:this._candidateResults,num_results:this._numResults,last_not_backspaced_query:this._lastNotBackspacedQuery,keystroke_count:this._keystrokeCount})};s.prototype.cancel=function(){"use strict";i.log("og_composer_cancel_tagger",void 0,{suggestion_mechanism:this._suggestionMechanism});var a=this._isFromActivityLink;this._isFromIconSelector&&this.invoke("cancelIconSelection",{action_type_id:this._actionTypeId,query:this._iconSearchInput?this._iconSearchInput.value:""});this._cancelTypeaheadSession();this._reset();this.hide();this.invoke("cancel");a&&this.invoke("cancelFromActivity")};s.prototype.setCancelButtonText=function(a){"use strict";h.setContent(this._cancelButton,a)};s.prototype._showObjectSearch=function(){"use strict";this._hideActionTypeSelector(),h.show(h.find(this.getRoot(),"div","og-object-search"))};s.prototype.selectActionTypeImplicitly=function(a){"use strict";__p&&__p();var b=h.scry(this.getRoot(),"div","at_result"),c=!1;for(var d=0;d<b.length;d++){var e=l.get(b[d]);if(e.id==a){c=!0;break}}if(!c)return!1;this._selectActionType(e);return!0};s.prototype.showIconSelector=function(a,b,c,d){"use strict";__p&&__p();this.show();this._hideActionTypeSelector();this.updatePrompt(r._("Select an icon"));this._actionTypeId=a;var e="/platform/og/composer/icon_selector/";e=new m(e).setData({actionTypeID:a,objectID:b,objectStr:c,iconID:d});e.listen("postprocess",this._setUpIconSelector.bind(this));e.send();h.replace(this._iconSelector,this._defaultIconSelector);h.show(this._iconSelector);i.log("og_composer_show_icon_selector")};s.prototype._setUpIconSelector=function(){"use strict";this._iconSelector=h.find(this.getRoot(),"div","og-icon-selector");var a=h.scry(this._iconSelector,"a","remove-token");a.length!==0&&h.listen(a[0],"click",null,this._cancelIconSelection.bind(this));this._iconSearchInput=h.scry(this._iconSelector,"input","icon-search-input")[0];h.listen(this._iconSelector,"click","og-icon-area",this._selectIcon.bind(this));h.listen(this._iconSelector,"click","original-og-icon",function(){return this.cancel()}.bind(this));this._isFromIconSelector=!0};s.prototype._cancelIconSelection=function(){"use strict";this._reset(),this.invoke("clear")};s.prototype._selectIcon=function(event){"use strict";__p&&__p();var a=event.getNode("og-icon-area");a=a.lastChild.cloneNode();h.show(a);var b=h.find(this.getRoot(),"i","token-icon");n.addSigil(a,"token-icon");h.replace(b,a);this._icon=a;this._iconSrc=l.get(a).icon_src;this._customIconID=this._icon.getAttribute("data-icon");b=this._iconSearchInput?this._iconSearchInput.value:"";a=this._actionTypeId;this._reset();this.invoke("iconChanged",{icon:this._icon,icon_src:this._iconSrc,custom_icon_id:this._customIconID,action_type_id:a,query:b})};s.prototype._selectActionType=function(a){"use strict";this._typeaheadSessionID=String(Math.floor(Date.now()*Math.random()));this._lastNotBackspacedQuery="";this._keystrokeCount=0;this._actionType=a;a={at_id:this._actionType.id,place_id:this._placeID,sid:this._typeaheadSessionID};n.invoke("m:quicksearch:actionSelected",null,a);this._showObjectSearch();this.updatePrompt(this._actionType.prompt)};s.prototype._hideActionTypeSelector=function(){"use strict";var a=h.scry(this.getRoot(),"div","og_ats");a.length!==0&&g.conditionClass(a[0],"_51xt",!0)};s.prototype._showActionTypeSelector=function(){"use strict";var a=h.scry(this.getRoot(),"div","og_ats");a.length!==0&&g.conditionClass(a[0],"_51xt",!1)};s.prototype._hideIconSelector=function(event){"use strict";this._isFromIconSelector=!1,this._actionTypeId=null,h.hide(this._iconSelector),this._showActionTypeSelector()};s.prototype._submit=function(){"use strict";var a={action_type:this._actionType.id,action_type_str:this._actionType.name,object:this._objectID,object_str:this._objectStr,show_attachment:this._showAttachment,icon:this._icon,icon_src:this._iconSrc,fbt_phrase:this._getTagPhrase(this._actionType.id,this._icon,this._objectStr,this._objectID),triggers_event_tag_expansion:this._triggersEventTagExpansion,suggestion_mechanism:this._suggestionMechanism,custom_icon:this._customIconID,typeahead_session_id:this._typeaheadSessionID,composer_session_id:this._compositionID,selected_original_id:this._selectedOriginalID,selected_score:this._selectedScore,place_id:this._placeID,client_time:this._clientTime,request_id:this._requestID,display_position:this._selectedPos,num_results:this._numResults,results:this._candidateResults,search_term:this._query,last_not_backspaced_query:this._lastNotBackspacedQuery,keystroke_count:this._keystrokeCount};this._reset();this.invoke("submit",a);delete a.icon;delete a.fbt_phrase;i.log("og_composer_object_selected",void 0,a)};s.prototype._getTagPhrase=function(a,b,c,d){"use strict";return j.getFBTPhrase(a,b,c,d)};s.fromID=function(a){"use strict";a=o(a);var b=l.get(a);b._ogTagger||(b._ogTagger=new s(a));return b._ogTagger};q(s,["submit","cancel","clear","iconChanged","cancelFromActivity","cancelIconSelection"]);Object.assign(s.prototype,{root:null,_prompt:null,_defaultPrompt:null,_actionType:null,_objectID:null,_objectStr:null,_triggersEventTagExpansion:null,_icon:null,_iconSelector:null,_defaultIconSelector:null,_showAttachment:null,_customIconID:null,_placeID:0,_listeners:null,_suggestionMechanism:null,_typeaheadSessionID:null,_compositionID:null,_selectedOriginalID:null,_selectedScore:null,_clientTime:null,_requestID:null,_selectedPos:null,_numResults:null,_candidateResults:null,_query:null,_lastNotBackspacedQuery:null,_keystrokeCount:null});e.exports=s}),null);
__d("MQuickSearch",["DOM","HTML","MRequest","MRequestTypes","MViewport","Stratcom","Vector","$","destroyOnUnload","eventsMixinDeprecated","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){__p&&__p();var r=[];function a(a,b){"use strict";__p&&__p();this._uri=a.uri;this._args=a.args||{};var c=n(a.nodeID);this._input=g.find(c,"input","quicksearch-input");this._button=g.scry(c,"*","quicksearch-button")[0];this._container=n(a.containerID);this._resultsBoxID=a.resultsBoxID;this._resultsBox=n(this._resultsBoxID);this._shouldScroll=a.shouldScroll;a.throbber&&(this._throbber=new h(a.throbber));this._request=null;this._searchLogger=b||null;this._listeners=[g.listen(this._input,"focus",null,this._focus.bind(this)),g.listen(this._input,"blur",null,this._cleanup.bind(this)),g.listen(this._input,"keydown",null,this._handleKeyDown.bind(this)),g.listen(this._input,"keyup",null,this._handleKeyUp.bind(this))];this._button&&this._listeners.push(g.listen(this._button,"click",null,this._click.bind(this)));this._args.bootstrap&&this.search(this._input.value);r.push(this);o(function(){l.removeCurrentListener(),r.forEach(function(a){return a._destroy()}),r=[]})}a.prototype._handleKeyDown=function(event){"use strict";this._scrollToContainer(),this._previousText=this._input.value};a.prototype._handleKeyUp=function(event){"use strict";if(event.getSpecialKey()==="delete"&&(this._args.bootstrap||this._args.showInitialResultsOnClear)){var a=this._input.value;a.trim()===""&&a!==this._previousText&&this.reset()}};a.prototype._scrollToContainer=function(){"use strict";if(this._shouldScroll){var a=m.getPos(this._container);k.scrollTo(a.x,a.y)}};a.prototype._update=function(){"use strict";__p&&__p();var a=this._input.value;if(this._previousText==a)return;this._previousText=a;if(/^\s*$/.test(a)&&!this._args.bootstrap){this._resetContent();this._abortRequest();return}this._saveInitialNodes();this.search(a)};a.prototype.search=function(a){"use strict";__p&&__p();if(this.invoke("search",a).getPrevented())return;this._throbber&&g.setContent(this._resultsBox,this._throbber);this.addQueryParameters({q:a||""});this._abortRequest();this._searchLogger&&this._searchLogger.onSearch(this._args);this._request=new i(this._uri);this._request.setType(j.DEPENDENT);this._request.listen("done",function(a){this._resultsBox=n(this._resultsBoxID),this._searchLogger&&this._searchLogger.onResults(this._request,this._resultsBox),this._needsDefaultNodes&&(this._saveInitialNodes(),this._needsDefaultNodes=!1),this._request=null}.bind(this));this._request.setMethod("GET");this._request.setData(this._args).send()};a.prototype._abortRequest=function(){"use strict";this._request&&this._request.abort()&&(this._request=null)};a.prototype._resetContent=function(){"use strict";this._resultsBox=n(this._resultsBoxID),g.setContent(this._resultsBox,this._initialNodes)};a.prototype.resetToThrobber=function(){"use strict";this._resultsBox=n(this._resultsBoxID),this._throbber&&this._resultsBox&&g.setContent(this._resultsBox,this._throbber)};a.prototype.addQueryParameters=function(a){"use strict";Object.assign(this._args,a)};a.prototype.maybeAddQueryParameters=function(a){"use strict";for(var b in a)b in this._args||(this._args[b]=a[b])};a.prototype.clear=function(){"use strict";this._input.value="",this._initialNodes=null};a.prototype._focus=function(event){"use strict";this._focused=!0,this._button&&(this._button.setAttribute("type","button"),this._button.disabled=!1),this._scrollToContainer(),this._previousText=this._input.value,clearInterval(this._interval),this._interval=q(this._update.bind(this),300)};a.prototype._click=function(event){"use strict";event.prevent(),this.reset()};a.prototype._cleanup=function(){"use strict";this._searchLogger&&this._searchLogger.onCleanup(),this._focused=!1,!this._input.value&&this._button&&(this._button.setAttribute("type","submit"),this._button.disabled=!0),clearInterval(this._interval)};a.prototype.reset=function(){"use strict";this._abortRequest(),this._cleanup(),this._saveInitialNodes(),this._resetContent(),this._input.value="",this._input.blur(),this._button&&(this._button.setAttribute("type","submit"),this._button.disabled=!0),this._args.showInitialResultsOnClear&&this.search(""),this._scrollToContainer()};a.prototype._saveInitialNodes=function(){"use strict";this._initialNodes||(this._initialNodes=Array.from(this._resultsBox.childNodes))};a.prototype._destroy=function(){"use strict";this._listeners.forEach(function(a){return a&&a.remove()}),this._listeners.length=0};a.prototype.setNeedsDefaultNodes=function(){"use strict";this._needsDefaultNodes=!0};a.getInstances=function(){"use strict";return r};p(a,["search"]);Object.assign(a.prototype,{_uri:null,_args:null,_input:null,_button:null,_container:null,_resultsBox:null,_shouldScroll:!0,_throbber:null,_focused:!1,_initialNodes:null,_previousText:null,_interval:null,_needsDefaultNodes:!1,_searchLogger:null});e.exports=a}),null);
__d("MQuickSearchOG",["MQuickSearch","Stratcom"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a){"use strict";__p&&__p();var b=new g(a);h.listen("m:quicksearch:actionSelected",null,function(a){var c={};c.atID=a.getData().at_id;c.placeID=a.getData().place_id;c.sid=a.getData().sid;b.setNeedsDefaultNodes();b.addQueryParameters(c);b.search()}.bind(this));h.listen("m:quicksearch:clear",null,function(){b.clear(),b.resetToThrobber()}.bind(this))}e.exports=a}),null);
__d("MPlacesCurrentLocation",["MPlaces"],(function(a,b,c,d,e,f,g){a=function(a){g.setCurrentJSONLocation(a.location),g.setLocationSearchMode(a.mode),a.mode==g.locationSearchModes.MODE_CHECKIN&&g.monitorLocation()};f.main=a}),null);
__d("MPlacesInit",["MPlaces","Stratcom"],(function(a,b,c,d,e,f,g,h){typeof window.usingGears!=="undefined"&&(g.locationOptions.enableHighAccuracy=!1),h.listen("click",g.LINK_SIGIL,g.onClick),h.listen("submit",g.FORM_SIGIL,g.onSubmit)}),null);
__d("MQuickSearchLogger",[],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this.$1=!1,this.$2=!1,this.$3=null}a.prototype.$4=function(){"use strict";this.$1=!0,this.$2=!1,this.$5=Math.random()};a.prototype.$6=function(){"use strict";this.$1=!1};a.prototype.logSessionStart=function(a){"use strict"};a.prototype.logResults=function(a,b){"use strict"};a.prototype.logClick=function(a){"use strict"};a.prototype.onSearch=function(a){"use strict";this.$1||(this.$4(),this.logSessionStart(a)),this.$3=a};a.prototype.onResults=function(a,b){"use strict";this.logResults(a,b)};a.prototype.onCleanup=function(){"use strict";this.$6()};a.prototype.onClick=function(a){"use strict";this.$2||(this.logClick(a),this.$2=!0,this.$6())};a.prototype.getSID=function(){"use strict";return this.$5};a.prototype.getLastRequest=function(){"use strict";return this.$3};e.exports=a}),null);
__d("MQuickSearchLoggerPlaces",["MarauderLogger","MLegacyDataStore","MQuickSearchLogger"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;j=babelHelpers.inherits(a,i);j&&j.prototype;a.prototype.logSessionStart=function(a){"use strict";g.log("m_checkin_search_session_start",void 0,{sid:this.getSID()})};a.prototype.logResults=function(a,b){"use strict";g.log("m_checkin_search_results",void 0,{sid:this.getSID(),search_experiment:h.get(b).searchExperiment})};a.prototype.logClick=function(a){"use strict";__p&&__p();var b=!1,c=-1;if(a){var d=h.get(a.selected_result);d!==null&&(b=d.isEventResult);var e=[];a.results!==null&&a.results.children!==null&&(e=a.results.children);for(var a=0;a<e.length;a++){var f=h.get(e[a]);if(d.id===f.id){c=a;break}}}f=-1;if(this.getLastRequest()!==null){a=this.getLastRequest();Object.prototype.hasOwnProperty.call(a,"q")&&Object.prototype.hasOwnProperty.call(a.q,"length")&&(f=this.getLastRequest().q.length)}g.log("m_checkin_search_click",void 0,{sid:this.getSID(),query_length:f,position:c,is_event:b})};function a(){"use strict";j.apply(this,arguments)}e.exports=a}),null);
__d("MQuickSearchPlaces",["MPlaces","MQuickSearch","MQuickSearchLoggerPlaces","Stratcom"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();function a(a){"use strict";__p&&__p();var b,c,d=new i(),e=new h(a,d),f=null,k=e.listen("search",function(a){__p&&__p();var d=f||g.getCurrentJSONLocation();if(d==b&&a==c){j.context().prevent();return}b=g.getCurrentJSONLocation();c=a;a={json_location:b};a[g.locationSearchModes.SEARCH_MODE]=g.getLocationSearchMode();e.maybeAddQueryParameters(a);j.invoke("m:quicksearch:location:change",null,d)}),l=j.listen("m:quicksearch:places:search-with-location",null,function(a){f=a,e.search()}),m=j.listen("m:quicksearch:places:search",null,function(){e.search()}),n=j.listen("m:quicksearch:places:cancel",null,function(){return e.reset()}),o=j.listen("m:quicksearch:places:click",null,function(event){d.onClick(event.getData())});j.listen("m:page:loading",null,function(){j.removeCurrentListener(),k.remove(),m.remove(),l.remove(),n.remove(),o.remove(),k=m=b=c=e=null})}e.exports=a}),null);
__d("MPrivacyDeferredSelector",["MRequest","MRequestTypes","MURI","Stratcom"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=null,l=null,m=null,n=!1;function a(a,b,c,d){l=a,k=b,m=c,n=d,j.listen("MPrivacyDeferredSelector::init",null,function(event){o(event),j.removeCurrentListener()})}function o(event){var a=new i("/privacy/selector");a.setQueryData({pt_id:l,eco:k,selected:m,defaultSelector:!0,useSmallIcons:n});a=new g(a.toString());a.setType(h.DEPENDENT);a.send()}function b(a){j.invoke("MPrivacyDeferredSelector-loaded",null,{id:a})}function c(a){a}e.exports={init:a,informLoaded:b,setShowNewcomerAudienceSelector:c}}),null);